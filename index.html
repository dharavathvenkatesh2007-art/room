<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hostel Finder App</title>
  <style>
    /* Colorful animated gradient background */
    body {
      font-family: Arial, sans-serif;
      margin:0; padding:20px;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color:#333;
    }
    @keyframes gradientShift {
      0% { background-position:0% 50%; }
      50% { background-position:100% 50%; }
      100% { background-position:0% 50%; }
    }

    /* Dark mode overrides */
    body.dark {
      background: linear-gradient(135deg, #141e30, #243b55);
      color:#eee;
    }
    body.dark .container {
      background: rgba(30,30,30,0.9);
      color:#eee;
    }
    body.dark input, body.dark select {
      background:#222; color:#eee; border:1px solid #555;
    }
    body.dark button {
      background:#00aaff;
    }
    body.dark .card { background:#333; color:#eee; }
    body.dark .card h3 { color:#00ffc8; }

    .page { display:none; }
    .active { display:block; }
    .container {
      background:#fff;
      padding:20px;
      border-radius:10px;
      max-width:600px;
      margin:20px auto;
      box-shadow:0 0 15px rgba(0,0,0,0.2);
    }
    h2 { text-align:center; }
    input, select, button {
      width:100%; padding:10px; margin:8px 0;
      border-radius:6px; border:1px solid #ccc;
    }
    button { background:#0066cc; color:#fff; border:none; cursor:pointer; }
    button:hover { background:#004999; }
    .choice-btn { width:200px; margin:10px auto; display:block; }
    .card {
      background:#f9f9f9; padding:15px; margin:15px 0;
      border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.2);
    }
    .card h3 { margin:0; color:#0066cc; }
    img { max-width:100%; border-radius:6px; margin-top:8px; }
    .joined { margin-top:8px; font-size:14px; }
    .link { text-align:center; margin-top:10px; color:#0066cc; cursor:pointer; }

    /* Settings icon for mode toggle */
    #modeToggle {
      position:fixed; top:10px; right:10px;
      width:36px; height:36px;
      border:none; border-radius:50%;
      background: rgba(0,0,0,0.6);
      color:#fff; font-size:18px;
      cursor:pointer; z-index:1000;
      display:flex; align-items:center; justify-content:center;
      transition: background 0.3s;
    }
    #modeToggle:hover { background: rgba(0,0,0,0.8); }
    body.light #modeToggle { background: rgba(255,255,255,0.8); color:#333; }
    body.light #modeToggle:hover { background: rgba(255,255,255,1); }
  </style>
</head>
<body class="light">

  <!-- Dark/Light mode toggle -->
  <button id="modeToggle" onclick="toggleMode()">⚙️</button>

  <!-- LOGIN PAGE -->
  <div id="loginPage" class="page active container">
    <h2>Login</h2>
    <input type="text" id="loginUser" placeholder="Username">
    <input type="password" id="loginPass" placeholder="Password">
    <button onclick="doLogin()">Login</button>
    <div id="loginMsg"></div>
    <div class="link" onclick="showPage('registerPage')">New user? Register here</div>
  </div>

  <!-- REGISTRATION PAGE -->
  <div id="registerPage" class="page container">
    <h2>Register</h2>
    <input type="text" id="regUser" placeholder="Choose a username">
    <input type="password" id="regPass" placeholder="Choose a password">
    <input type="password" id="regConfirm" placeholder="Confirm password">
    <button onclick="doRegister()">Register</button>
    <div id="regMsg"></div>
    <div class="link" onclick="showPage('loginPage')">Already registered? Login here</div>
  </div>

  <!-- USER/PROVIDER CHOICE PAGE -->
  <div id="choicePage" class="page container">
    <h2>Welcome to Hostel Finder</h2>
    <button class="choice-btn" onclick="showPage('userPage')">User</button>
    <button class="choice-btn" onclick="showPage('providerPage')">Provider</button>
    <div class="link" onclick="showPage('loginPage')">Logout</div>
  </div>

  <!-- PROVIDER PAGE -->
  <div id="providerPage" class="page container">
    <h2>Provider Portal</h2>
    <input type="text" id="location" placeholder="Enter location">
    <select id="type">
      <option value="Hostel">Hostel</option>
      <option value="PG">PG</option>
      <option value="Room">Room</option>
      <option value="Hotel">Hotel</option>
    </select>
    <input type="text" id="price" placeholder="Price (e.g. ₹5000/month)">
    <input type="text" id="contact" placeholder="Contact number">
    <input type="number" id="rooms" placeholder="Number of rooms">
    <input type="number" id="vacancy" placeholder="Total vacancy">
    <input type="text" id="photo" placeholder="Photo URL">
    <button onclick="saveData()">Submit</button>
    <div id="providerMsg"></div>

    <h3>My Accommodations</h3>
    <div id="providerList"></div>
    <button onclick="showPage('choicePage')">Back</button>
  </div>

  <!-- USER PAGE -->
  <div id="userPage" class="page container">
    <h2>Available Accommodations</h2>
    <div id="userResults"></div>
    <button onclick="showPage('choicePage')">Back</button>
  </div>

<script>
  // Dark/Light mode toggle
  function toggleMode() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  // Show/hide pages
  function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id==="providerPage") loadProviderList();
    if(id==="userPage") loadUserList();
  }

  // LOGIN
  function doLogin() {
    const u=document.getElementById("loginUser").value;
    const p=document.getElementById("loginPass").value;
    const msg=document.getElementById("loginMsg");
    let users=JSON.parse(localStorage.getItem("users"))||[];
    const found=users.find(user=>user.username===u && user.password===p);
    if(found || (u==="admin" && p==="1234")) {
      msg.style.color="green"; msg.textContent="Login successful!";
      setTimeout(()=>showPage('choicePage'),1000);
    } else { msg.style.color="red"; msg.textContent="Invalid credentials!"; }
  }

  // REGISTRATION
  function doRegister() {
    const u=document.getElementById("regUser").value;
    const p=document.getElementById("regPass").value;
    const c=document.getElementById("regConfirm").value;
    const msg=document.getElementById("regMsg");
    if(!u||!p||!c) { msg.style.color="red"; msg.textContent="Fill all fields"; return; }
    if(p!==c) { msg.style.color="red"; msg.textContent="Passwords do not match"; return; }
    let users=JSON.parse(localStorage.getItem("users"))||[];
    if(users.some(user=>user.username===u)) { msg.style.color="red"; msg.textContent="Username already exists"; return; }
    users.push({username:u,password:p});
    localStorage.setItem("users", JSON.stringify(users));
    msg.style.color="green"; msg.textContent="Registration successful!";
    setTimeout(()=>showPage('loginPage'),1000);
  }

  // Save provider accommodation data
  function saveData() {
    const location = document.getElementById('location').value.trim();
    const type = document.getElementById('type').value;
    const price = document.getElementById('price').value.trim();
    const contact = document.getElementById('contact').value.trim();
    const rooms = parseInt(document.getElementById('rooms').value);
    const vacancy = parseInt(document.getElementById('vacancy').value);
    const photo = document.getElementById('photo').value.trim();
    const msg = document.getElementById('providerMsg');

    if (!location || !price || !contact || isNaN(rooms) || isNaN(vacancy) || !photo) {
      msg.style.color = 'red';
      msg.textContent = 'Please fill all fields correctly.';
      return;
    }

    let providers = JSON.parse(localStorage.getItem('providers')) || [];
    providers.push({ location, type, price, contact, rooms, vacancy, photo });
    localStorage.setItem('providers', JSON.stringify(providers));

    msg.style.color = 'green';
    msg.textContent = 'Accommodation saved!';

    // Clear inputs
    document.getElementById('location').value = '';
    document.getElementById('price').value = '';
    document.getElementById('contact').value = '';
    document.getElementById('rooms').value = '';
    document.getElementById('vacancy').value = '';
    document.getElementById('photo').value = '';

    loadProviderList();
  }

  // Load provider accommodations
  function loadProviderList() {
    const list = document.getElementById('providerList');
    let providers = JSON.parse(localStorage.getItem('providers')) || [];
    list.innerHTML = '';
    if(providers.length === 0) {
      list.textContent = 'No accommodations added yet.';
      return;
    }
    providers.forEach((p, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${p.type} in ${p.location}</h3><p>Price: ${p.price}</p><p>Contact: ${p.contact}</p><p>Rooms: ${p.rooms}</p><p>Vacancy: ${p.vacancy}</p><img src='${p.photo}' alt='Photo'>`;
      list.appendChild(card);
    });
  }

  // Load user view accommodations
  function loadUserList() {
    const results = document.getElementById('userResults');
    let providers = JSON.parse(localStorage.getItem('providers')) || [];
    results.innerHTML = '';
    if(providers.length === 0) {
      results.textContent = 'No accommodations available.';
      return;
    }
    providers.forEach((p, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${p.type} in ${p.location}</h3><p>Price: ${p.price}</p><p>Contact: ${p.contact}</p><p>Rooms: ${p.rooms}</p><p>Vacancy: ${p.vacancy}</p><img src='${p.photo}' alt='Photo'>`;
      results.appendChild(card);
    });
  }

</script>
</body>
</html>